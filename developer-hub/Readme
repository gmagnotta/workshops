# Developer HUB lab

This lab is used to demonstrate on how to install and use Red Hat Developer HUB.

## Prerequirements

You need keycloak with a realm to authenticate users. The realm should be called RHDH and also the client id.

Configure SSO as defined here -> https://docs.redhat.com/en/documentation/red_hat_developer_hub/1.2/html/getting_started_with_red_hat_developer_hub/assembly-auth-provider-oidc#proc-configuring-keycloak-with-oidc_rhdh-getting-started

Remember to use a Valid redirect url as: https://backstage-developer-hub-developerhub.your-domain/api/auth/oidc/handler/frame

Configure Keycloak import plugin -> https://docs.redhat.com/en/documentation/red_hat_developer_hub/1.2/html/configuring_plugins_in_red_hat_developer_hub/rhdh-installing-dynamic-plugins#installation


In order to work, the Client Id needs to have query-groups, query-users and view-users roles.

Remember: Clients -> Client Id -> Service Account Roles -> Click at the top 'service-account-rhdh' !!!!

Configure github integration -> https://medium.com/@mifoster1723/sso-integrations-in-backstage-with-github-e40c2ec519a9

Usually you need to install before OpenShift Pipelines and OpenShift GitOps to show useful templates to customers

## Setup

Run playbook_developer_hub_secrets.yaml and then playbook_developer_hub.yaml

## RBAC

The system is configured to use RBAC.

In Keycloak you need a group 'admins' for users that can change configuration of Developer Hub and a group 'developers' for users that can use it.


## Resources

https://piotrminkowski.com/2024/07/04/idp-on-openshift-with-red-hat-developer-hub/